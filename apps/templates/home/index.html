{% extends "layouts/base.html" %}

{% block title %} Home {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<!-- <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
<script defer src="https://pyscript.net/alpha/pyscript.js"></script> -->
{% endblock stylesheets %}

{% block content %}
	{% if current_user.is_authenticated %}
		<div class="content">
			<div class="panel-header bg-primary-gradient"> <!-- HEADER -->
				<div class="page-inner py-5">
					<div class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
						<div>
							<h2 class="text-white pb-2 fw-bold">Dashboard</h2>
							<h5 class="text-white op-7 mb-2">FORGE Security</h5>
						</div>
						<div class="ml-md-auto py-2 py-md-0">
							<a href="#" class="btn btn-white btn-border btn-round mr-2">Services</a>
							<a href="#" class="btn btn-secondary btn-round">Projects</a>
						</div>
					</div>
				</div>
			</div>
			<div class="page-inner mt--5">
				<div class="row mt--2">
					<div class="col-md-6">
						<div class="card full-height">
							<div class="card-body">
								<div class="card-title">Archived Reports</div>
								<div class="card-category">Archived reports for special projects</div>
								<div class="d-flex flex-wrap justify-content-around pb-2 pt-4">
									<div class="px-2 pb-2 pb-md-0 text-center">
										<div id="vanguard-circle"></div>
										<a href="{{ url_for('views.archived_reports') }}"><h6 class="fw-bold mt-3 mb-0">Vanguard</h6></a>
									</div>
									<div class="px-2 pb-2 pb-md-0 text-center">
										<div id="ssb-circle"></div>
										<a href="{{ url_for('views.archived_reports') }}"><h6 class="fw-bold mt-3 mb-0">SSB</h6></a>
									</div>
									<div class="px-2 pb-2 pb-md-0 text-center">
										<div id="bsa-circle"></div>
										<a href="{{ url_for('views.archived_reports') }}"><h6 class="fw-bold mt-3 mb-0">BSA</h6></a>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="card full-height">
							<div class="card-body">
								<div class="card-title">Reports Generated via FORGE</div>
								<div class="row py-3">
									<div class="col-md-4 d-flex flex-column justify-content-around">
										<div>
											<h6 class="fw-bold text-uppercase text-success op-8">Total Reports</h6>
											<h3 class="fw-bold">{{ package.total_length }}</h3>
										</div>
										<div>
											<h6 class="fw-bold text-uppercase text-danger op-8">Weekly Usage</h6>
											<h3 class="fw-bold">{{ package.week_total }}</h3>
										</div>
									</div>
									<div class="col-md-8">
										<div id="chart-container">
											<canvas id="totalReportsChart"></canvas>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-8">
						<div class="card">
							<div class="card-header">
								<div class="card-head-row">
									<div class="card-title">User Reports</div>
									<div class="card-tools">
										<a href="#" class="btn btn-info btn-border btn-round btn-sm mr-2">
											<span class="btn-label">
												<i class="fas download"></i>
											</span>
											Export
										</a>
										<a href="#" class="btn btn-info btn-border btn-round btn-sm">
											<span class="btn-label">
												<i class="fa fa-print"></i>
											</span>
											Print
										</a>
									</div>
								</div>
							</div>
							<div class="card-body">
								<div class="chart-container" style="min-height: 375px">
									<canvas id="statisticsChart"></canvas>
								</div>
								<div id="myChartLegend"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	{% else %}
	<div class="content">
		<div class="panel-header bg-primary-gradient">
			<div class="page-inner py-5">
				<div class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
					<div>
						<h2 class="text-white pb-2 fw-bold">Dashboard</h2>
						<h5 class="text-white op-7 mb-2">FORGE Security</h5>
					</div>
					<div class="ml-md-auto py-2 py-md-0">
						<a href="{{ url_for('views.about_us') }}" class="btn btn-white btn-border btn-round mr-2">About Us</a>
						<a href="{{ url_for('views.functions') }}" class="btn btn-white btn-border btn-round mr-2">Functions</a>
						<a href="{{ url_for('views.projects') }}" class="btn btn-white btn-border btn-round mr-2">Projects</a>
					</div>
				</div>
			</div>
		</div>
		<div class="page-inner mt--5">
			<div class="row row-card-no-pd">
				<div class="col-md-12">
					<div class="card">
						<div class="card-header">
							<div class="card-head-row">
								<h4 class="card-title">FORGE Security, PHC Special Project</h4>
							</div>
							<p class="card-category">
							Using technology to streamline the data collection and analysis process.</p>
						</div>
						<div class="card-body">
							<p>This is where the description can go.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="page-inner mt--5">
			<div class="row mt--2">
				<div class="col-md-12">
					<div class="card">
						<div class="card-body">
							<div class="card-title">Reports Generated via FORGE</div>
							<div class="row py-3">
								<div class="col-md-4 d-flex flex-column justify-content-around">
									<div>
										<h6 class="fw-bold text-uppercase text-success op-8">Total Reports</h6>
										<h3 class="fw-bold">{{ package.total_length }}</h3>
									</div>
									<div>
										<h6 class="fw-bold text-uppercase text-danger op-8">Weekly Usage</h6>
										<h3 class="fw-bold">{{ package.week_total }}</h3>
									</div>
								</div>
								<div class="col-md-8">
									<div id="chart-container">
										<canvas id="totalReportsChart"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	{% endif %}
	{% endblock content %}


	<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
	<script>
		window.package = {{ package | tojson }}
	</script>

		<!-- Atlantis DEMO methods, don't include it in your project! -->
		<script src="/static/assets/js/setting-demo.js"></script>
		<script src="/static/assets/js/demo.js"></script>

		<script>
			Circles.create({
				id:'vanguard-circle',
				radius:45,
				value:55,
				maxValue:100,
				width:7,
				text: 55,
				colors:['#f1f1f1', '#FF9E27'],
				duration:600,
				wrpClass:'circles-wrp',
				textClass:'circles-text',
				styleWrapper:true,
				styleText:true
			})

			Circles.create({
				id:'ssb-circle',
				radius:35,
				value:40,
				maxValue:100,
				width:7,
				text: 40,
				colors:['#f1f1f1', '#2BB930'],
				duration:400,
				wrpClass:'circles-wrp',
				textClass:'circles-text',
				styleWrapper:true,
				styleText:true
			})

			Circles.create({
				id:'bsa-circle',
				radius:60,
				value:80,
				maxValue:100,
				width:7,
				text: 80,
				colors:['#f1f1f1', '#F25961'],
				duration:1200,
				wrpClass:'circles-wrp',
				textClass:'circles-text',
				styleWrapper:true,
				styleText:true
			})

			var totalReportsChart = document.getElementById('totalReportsChart').getContext('2d');

			var myTotalReportsChart = new Chart(totalReportsChart, {
				type: 'bar',
				data: {
					labels: window.package.num_dates || ["S", "M", "T", "W", "T", "F", "S"],
					datasets : [{
						label: "Daily Reports",
						backgroundColor: '#ff9e27',
						borderColor: 'rgb(23, 125, 255)',
						data: window.package.num_files || [0, 0, 0, 0, 0, 0, 2],
					}],
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					legend: {
						display: false,
					},
					scales: {
						yAxes: [{
							ticks: {
								display: false //this will remove only the label
							},
							gridLines : {
								drawBorder: false,
								display : false
							}
						}],
						xAxes : [ {
							gridLines : {
								drawBorder: false,
								display : false
							}
						}]
					},
				}
			});

			$('#lineChart').sparkline([105,103,123,100,95,105,115], {
				type: 'line',
				height: '70',
				width: '100%',
				lineWidth: '2',
				lineColor: '#ffa534',
				fillColor: 'rgba(255, 165, 52, .14)'
			});
		</script>

{% endblock javascripts %}
